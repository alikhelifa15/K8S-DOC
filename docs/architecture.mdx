---
title: Architecture FitConnect
description: Architecture dÃ©taillÃ©e de la plateforme avec diagrammes et composants
---

# Architecture FitConnect ğŸ—ï¸

Architecture complÃ¨te de la plateforme FitConnect dÃ©ployÃ©e sur Google Kubernetes Engine avec une approche microservices.

## ğŸ¯ Vue d'Ensemble Architecture

### Diagramme Global

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INTERNET                                 â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 Google Cloud DNS                        â”‚    â”‚
â”‚  â”‚            fitnessconnect.fr                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Google Kubernetes Engine                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               GCE Load Balancer                         â”‚    â”‚
â”‚  â”‚                 (Ingress)                               â”‚    â”‚
â”‚  â”‚              34.118.xxx.xxx                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                        â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 Traefik Ingress                         â”‚    â”‚
â”‚  â”‚             SSL Termination                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚                                              â”‚         â”‚
â”‚        â–¼                                              â–¼         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontend   â”‚  â”‚   Backend   â”‚  â”‚  Keycloak   â”‚  â”‚ Adminer  â”‚ â”‚
â”‚  â”‚   (React)   â”‚  â”‚  (NestJS)   â”‚  â”‚    SSO      â”‚  â”‚   DB     â”‚ â”‚
â”‚  â”‚ 2 replicas  â”‚  â”‚ 1 replica   â”‚  â”‚ 1 replica   â”‚  â”‚  Admin   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                PostgreSQL                               â”‚    â”‚
â”‚  â”‚              1 replica + PVC                            â”‚    â”‚
â”‚  â”‚               fitness_platform_db                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Uptime Kuma Monitoring                     â”‚    â”‚
â”‚  â”‚                 1 replica + PVC                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants Principaux

| Service | Technologie | Replicas | RÃ´le |
|---------|-------------|----------|------|
| **Frontend** | React + TypeScript | 2 | Interface utilisateur |
| **Backend API** | NestJS + TypeScript | 1 | Logique mÃ©tier |
| **PostgreSQL** | PostgreSQL 14 | 1 | Persistance donnÃ©es |
| **Keycloak** | Keycloak 24 | 1 | Authentification SSO |
| **Adminer** | Adminer Latest | 1 | Administration DB |
| **Uptime Kuma** | Uptime Kuma | 1 | Monitoring |

## ğŸŒ Architecture RÃ©seau

### Topologie GKE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RÃ©seau Externe                               â”‚
â”‚                  192.168.1.0/24                                â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Client    â”‚  â”‚   Router    â”‚  â”‚  Firewall   â”‚             â”‚
â”‚  â”‚192.168.1.100â”‚  â”‚192.168.1.1  â”‚  â”‚   Rules     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Google Cloud Platform                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              GKE Cluster Network                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Pod Network: 10.42.0.0/16                            â”‚    â”‚
â”‚  â”‚  Service Network: 10.43.0.0/16                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚   Node 1    â”‚  â”‚   Node 2    â”‚  â”‚   Node 3    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  (Master)   â”‚  â”‚  (Worker)   â”‚  â”‚  (Worker)   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Frontend    â”‚  â”‚ Backend     â”‚  â”‚ Database    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Pods x2     â”‚  â”‚ Pod x1      â”‚  â”‚ Pod x1      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Keycloak    â”‚  â”‚ Adminer     â”‚  â”‚ Uptime-Kuma â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Pod x1      â”‚  â”‚ Pod x1      â”‚  â”‚ Pod x1      â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Configuration RÃ©seau

| Composant | Type | IP/Port | AccÃ¨s |
|-----------|------|---------|-------|
| **Ingress** | GCE LoadBalancer | Public | HTTPS 443 |
| **Frontend** | LoadBalancer | 34.38.27.13:80 | Public |
| **API** | LoadBalancer | 34.38.105.6:3000 | Public |
| **Keycloak** | ClusterIP | Internal:8080 | Via Ingress |
| **PostgreSQL** | ClusterIP | Internal:5432 | Interne |
| **Adminer** | LoadBalancer | 34.52.160.140:8080 | Public |
| **Uptime Kuma** | LoadBalancer | 34.79.238.35:3001 | Public |

### Flux de Communication

```
Utilisateur
    â”‚
    â–¼ HTTPS (443)
GCE Load Balancer
    â”‚
    â–¼ HTTP (80/8080)
Traefik Ingress Controller
    â”‚
    â”œâ”€â–¶ Frontend Service â”€â”€â–¶ Frontend Pods (2x)
    â”‚      â”‚
    â”‚      â–¼ API Calls (3000)
    â”œâ”€â–¶ Backend Service â”€â”€â–¶ Backend Pod (1x)
    â”‚      â”‚
    â”‚      â–¼ SQL (5432)
    â”‚   PostgreSQL Service â”€â”€â–¶ PostgreSQL Pod (1x)
    â”‚
    â”œâ”€â–¶ Keycloak Service â”€â”€â–¶ Keycloak Pod (1x)
    â”‚
    â”œâ”€â–¶ Adminer Service â”€â”€â–¶ Adminer Pod (1x)
    â”‚
    â””â”€â–¶ Uptime-Kuma Service â”€â”€â–¶ Uptime-Kuma Pod (1x)
```

## ğŸ“¦ Architecture des Applications

### Frontend React + TypeScript

```yaml
# Configuration Frontend
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
  namespace: annual-project
spec:
  replicas: 2
  selector:
    matchLabels:
      app: frontend
  template:
    spec:
      containers:
      - name: frontend
        image: europe-west1-docker.pkg.dev/k8s-frist-test/annual-project-repo/frontend:latest
        ports:
        - containerPort: 80
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"
```

**Technologies Frontend :**
- React.js 18 avec TypeScript strict
- Tailwind CSS pour le styling
- Vite pour le bundling
- Nginx pour servir les assets statiques

### Backend NestJS + TypeScript

```yaml
# Configuration API NestJS
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api
  namespace: annual-project
spec:
  replicas: 1
  selector:
    matchLabels:
      app: api
  template:
    spec:
      initContainers:
      - name: wait-for-postgres
        image: postgres:14
        command: ["sh", "-c", "until pg_isready -h postgres-service -p 5432 -U postgres; do sleep 5; done"]
      containers:
      - name: api
        image: europe-west1-docker.pkg.dev/k8s-frist-test/annual-project-repo/api:latest
        ports:
        - containerPort: 3000
        env:
        - name: DATABASE_HOST
          value: "postgres-service"
        - name: KEYCLOAK_URL
          value: "https://login.fitnessconnect.fr"
```

**Technologies Backend :**
- NestJS 10 avec TypeScript
- PostgreSQL avec TypeORM
- JWT + Keycloak pour l'authentification
- Stripe pour les paiements
- Validation avec class-validator
- Swagger pour l'API documentation

### Base de DonnÃ©es PostgreSQL

```yaml
# Configuration PostgreSQL
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgres
  namespace: annual-project
spec:
  replicas: 1
  template:
    spec:
      containers:
      - name: postgres
        image: postgres:14
        env:
        - name: POSTGRES_DB
          value: "fitness_platform_db"
        - name: POSTGRES_USER
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: POSTGRES_USER
        volumeMounts:
        - name: postgres-storage
          mountPath: /var/lib/postgresql/data
      volumes:
      - name: postgres-storage
        persistentVolumeClaim:
          claimName: postgres-pvc
```

**Persistance :**
- PersistentVolume de 10Gi sur GKE
- Backup automatique via scripts
- RÃ©plication possible pour la haute disponibilitÃ©

## ğŸ” Architecture de SÃ©curitÃ©

### Flux d'Authentification Keycloak

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    1. Login Request    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚             â”‚
â”‚  Frontend   â”‚                        â”‚  Keycloak   â”‚
â”‚   (React)   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    SSO      â”‚
â”‚             â”‚    2. Redirect to SSO   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚
       â”‚ 3. User Credentials                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼ 4. Authentication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    5. JWT Token        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚             â”‚
â”‚  Frontend   â”‚                        â”‚  Keycloak   â”‚
â”‚             â”‚                        â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. API Calls with JWT
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    7. Token Validation â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚             â”‚
â”‚  Backend    â”‚                        â”‚  Keycloak   â”‚
â”‚  (NestJS)   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    SSO      â”‚
â”‚             â”‚    8. User Info         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Network Policies - Isolation RÃ©seau

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Network Segmentation                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Internet   â”‚   âœ…     â”‚  Frontend   â”‚   âœ…     â”‚ Backend  â”‚ â”‚
â”‚  â”‚   Traffic   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Pods     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Pod    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                       â”‚      â”‚
â”‚                                  â”‚ âŒ (Blocked)          â”‚ âœ…   â”‚
â”‚                                  â–¼                       â–¼      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Uptime-Kuma â”‚   âœ…     â”‚ PostgreSQL  â”‚   âœ…     â”‚ Keycloak â”‚ â”‚
â”‚  â”‚    Pod      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Pod      â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Pod    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â–²                              â”‚
â”‚                                  â”‚ âœ…                           â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                           â”‚   Adminer   â”‚                       â”‚
â”‚                           â”‚     Pod     â”‚                       â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```yaml
# Isolation RÃ©seau PostgreSQL
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: postgres-network-policy
  namespace: annual-project
spec:
  podSelector:
    matchLabels:
      app: postgres
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: api
    - podSelector:
        matchLabels:
          app: keycloak
    - podSelector:
        matchLabels:
          app: adminer
    ports:
    - protocol: TCP
      port: 5432
```

### Secrets Management

| Secret | Contenu | Usage |
|--------|---------|-------|
| **postgres-secret** | User/Password DB | Connexion PostgreSQL |
| **keycloak-secret** | Admin credentials | Administration Keycloak |
| **api-secret** | JWT, Stripe, Email | Configuration API |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubernetes Secrets                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚postgres-    â”‚  â”‚keycloak-    â”‚  â”‚   api-      â”‚             â”‚
â”‚  â”‚secret       â”‚  â”‚secret       â”‚  â”‚ secret      â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚             â”‚
â”‚  â”‚â€¢ USER       â”‚  â”‚â€¢ ADMIN      â”‚  â”‚â€¢ JWT_SECRET â”‚             â”‚
â”‚  â”‚â€¢ PASSWORD   â”‚  â”‚â€¢ PASSWORD   â”‚  â”‚â€¢ STRIPE_KEY â”‚             â”‚
â”‚  â”‚â€¢ DATABASE   â”‚  â”‚             â”‚  â”‚â€¢ MAIL_PASS  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                â”‚                â”‚                     â”‚
â”‚        â–¼                â–¼                â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚PostgreSQL   â”‚  â”‚  Keycloak   â”‚  â”‚   Backend   â”‚             â”‚
â”‚  â”‚    Pod      â”‚  â”‚    Pod      â”‚  â”‚    Pod      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Architecture de DÃ©ploiement

### Pipeline CI/CD GitLab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitLab CI/CD Pipeline                       â”‚
â”‚                                                                 â”‚
â”‚                    ğŸŒ¿ BRANCHES feature/*                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚    TEST     â”‚                                                â”‚
â”‚  â”‚             â”‚                                                â”‚
â”‚  â”‚â€¢ Frontend   â”‚                                                â”‚
â”‚  â”‚â€¢ API Tests  â”‚                                                â”‚
â”‚  â”‚â€¢ PostgreSQL â”‚                                                â”‚
â”‚  â”‚â€¢ Coverage   â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                 â”‚
â”‚                    ğŸ”„ BRANCH develop                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚    TEST     â”‚                                                â”‚
â”‚  â”‚             â”‚                                                â”‚
â”‚  â”‚â€¢ Frontend   â”‚                                                â”‚
â”‚  â”‚â€¢ API Tests  â”‚                                                â”‚
â”‚  â”‚â€¢ PostgreSQL â”‚                                                â”‚
â”‚  â”‚â€¢ Integrationâ”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                 â”‚
â”‚                    ğŸš€ BRANCH main (PRODUCTION)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    BUILD    â”‚  â”‚   DEPLOY    â”‚  â”‚   VERIFY    â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚             â”‚
â”‚  â”‚â€¢ Frontend   â”‚  â”‚â€¢ GKE Apply  â”‚  â”‚â€¢ Health     â”‚             â”‚
â”‚  â”‚â€¢ API        â”‚  â”‚â€¢ PostgreSQL â”‚  â”‚  Checks     â”‚             â”‚
â”‚  â”‚â€¢ Docker     â”‚  â”‚â€¢ Keycloak   â”‚  â”‚â€¢ Services   â”‚             â”‚
â”‚  â”‚  Images     â”‚  â”‚â€¢ Ingress    â”‚  â”‚â€¢ Monitoring â”‚             â”‚
â”‚  â”‚â€¢ Registry   â”‚  â”‚â€¢ SSL Certs  â”‚  â”‚â€¢ Uptime     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                â”‚                                      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## ğŸ’¾ Architecture de Stockage

### Volumes Persistants

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Google Cloud Storage                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              GKE Persistent Disks                       â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚  â”‚PostgreSQL   â”‚            â”‚ Uptime-Kuma â”‚             â”‚    â”‚
â”‚  â”‚  â”‚    PVC      â”‚            â”‚    PVC      â”‚             â”‚    â”‚
â”‚  â”‚  â”‚   10Gi      â”‚            â”‚    2Gi      â”‚             â”‚    â”‚
â”‚  â”‚  â”‚             â”‚            â”‚             â”‚             â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Database   â”‚            â”‚â€¢ Config     â”‚             â”‚    â”‚
â”‚  â”‚  â”‚  Files      â”‚            â”‚â€¢ Logs       â”‚             â”‚    â”‚
â”‚  â”‚  â”‚â€¢ WAL Logs   â”‚            â”‚â€¢ SQLite DB  â”‚             â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Backups    â”‚            â”‚             â”‚             â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                          â”‚                           â”‚
â”‚           â–¼                          â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚PostgreSQL   â”‚            â”‚ Uptime-Kuma â”‚                     â”‚
â”‚  â”‚    Pod      â”‚            â”‚    Pod      â”‚                     â”‚
â”‚  â”‚             â”‚            â”‚             â”‚                     â”‚
â”‚  â”‚Mount:       â”‚            â”‚Mount:       â”‚                     â”‚
â”‚  â”‚/var/lib/    â”‚            â”‚/app/data    â”‚                     â”‚
â”‚  â”‚postgresql/  â”‚            â”‚             â”‚                     â”‚
â”‚  â”‚data         â”‚            â”‚             â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```yaml
# PersistentVolume PostgreSQL
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgres-pvc
  namespace: annual-project
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard-rwo

---
# PersistentVolume Uptime Kuma
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: uptime-kuma-pvc
  namespace: annual-project
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
  storageClassName: standard-rwo
```

## ğŸŒ Architecture Ingress et DNS

### Configuration Ingress

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DNS Resolution                           â”‚
â”‚                                                                 â”‚
â”‚  fitnessconnect.fr          â”€â”€â”€â”€â”€â”€â–¶  34.118.xxx.xxx             â”‚
â”‚  api.fitnessconnect.fr      â”€â”€â”€â”€â”€â”€â–¶  34.118.xxx.xxx             â”‚
â”‚  login.fitnessconnect.fr    â”€â”€â”€â”€â”€â”€â–¶  34.118.xxx.xxx             â”‚
â”‚  adminer.fitnessconnect.fr  â”€â”€â”€â”€â”€â”€â–¶  34.118.xxx.xxx             â”‚
â”‚  uptimekuma.fitnessconnect.fr â”€â”€â”€â”€â–¶  34.118.xxx.xxx             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GCE Load Balancer                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               SSL Termination                           â”‚    â”‚
â”‚  â”‚        (Google Managed Certificates)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                        â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Ingress Controller                         â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Route by Host Header:                                  â”‚    â”‚
â”‚  â”‚  â€¢ fitnessconnect.fr        â”€â”€â–¶ frontend-service       â”‚    â”‚
â”‚  â”‚  â€¢ api.fitnessconnect.fr    â”€â”€â–¶ api-service            â”‚    â”‚
â”‚  â”‚  â€¢ login.fitnessconnect.fr  â”€â”€â–¶ keycloak-service       â”‚    â”‚
â”‚  â”‚  â€¢ adminer.fitnessconnect.frâ”€â”€â–¶ adminer-service        â”‚    â”‚
â”‚  â”‚  â€¢ uptimekuma.fitnessconnect.frâ–¶ uptime-kuma-service   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: project-ingress
  namespace: annual-project
  annotations:
    kubernetes.io/ingress.class: "gce"
    networking.gke.io/managed-certificates: "fitnessconnect-cert"
    kubernetes.io/ingress.allow-http: "false"
spec:
  rules:
  - host: fitnessconnect.fr
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend-service
            port:
              number: 80
  - host: api.fitnessconnect.fr
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 3000
```

### Certificats SSL

```yaml
apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: fitnessconnect-cert
  namespace: annual-project
spec:
  domains:
    - fitnessconnect.fr
    - www.fitnessconnect.fr
    - api.fitnessconnect.fr
    - login.fitnessconnect.fr
    - adminer.fitnessconnect.fr
    - uptimekuma.fitnessconnect.fr
```

## ğŸ“Š Monitoring et ObservabilitÃ©

### Architecture de Monitoring

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Monitoring Stack                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Uptime-Kuma â”‚  â”‚ Kubernetes  â”‚  â”‚   Google    â”‚             â”‚
â”‚  â”‚             â”‚  â”‚  Metrics    â”‚  â”‚   Cloud     â”‚             â”‚
â”‚  â”‚â€¢ HTTP Checksâ”‚  â”‚             â”‚  â”‚ Monitoring  â”‚             â”‚
â”‚  â”‚â€¢ DB Checks  â”‚  â”‚â€¢ Pod Status â”‚  â”‚             â”‚             â”‚
â”‚  â”‚â€¢ SSL Checks â”‚  â”‚â€¢ Resources  â”‚  â”‚â€¢ Node Stats â”‚             â”‚
â”‚  â”‚â€¢ Alerts     â”‚  â”‚â€¢ Events     â”‚  â”‚â€¢ Network    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                â”‚                â”‚                     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                         â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Alert Manager                            â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â€¢ Slack Notifications                                  â”‚    â”‚
â”‚  â”‚  â€¢ Email Alerts                                         â”‚    â”‚
â”‚  â”‚  â€¢ Webhook Integrations                                 â”‚    â”‚
â”‚  â”‚  â€¢ Escalation Policies                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Uptime Kuma Configuration

- **Monitoring Frontend** : VÃ©rification HTTPS fitnessconnect.fr
- **Monitoring API** : Health checks api.fitnessconnect.fr/health
- **Monitoring Database** : Connexion PostgreSQL
- **Monitoring Auth** : DisponibilitÃ© Keycloak
- **Alertes** : SMS mobile/free




